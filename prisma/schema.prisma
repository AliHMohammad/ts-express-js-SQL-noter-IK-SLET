generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model albums {
  id              Int              @id @default(autoincrement())
  title           String           @unique() @db.VarChar(255)
  year_of_release Int
  image           String?          @default("anon-billed") @db.VarChar(1000)
  tracks   albums_tracks[]
  artists  artists_albums[]
}

model artists {
  id             Int              @id @default(autoincrement())
  name           String           @unique() @db.VarChar(255)
  image          String?          @default("anon-billed") @db.VarChar(1000)
  albums artists_albums[]
  tracks artists_tracks[]
}

model tracks {
  id             Int              @id @default(autoincrement())
  title          String           @db.VarChar(255)
  duration       Int
  albums  albums_tracks[]
  artists artists_tracks[]
}

model albums_tracks {
  album_id Int
  track_id Int
  tracks   tracks @relation(fields: [track_id], references: [id], onDelete: Cascade, onUpdate: Cascade)
  albums   albums @relation(fields: [album_id], references: [id], onDelete: Cascade, onUpdate: Cascade)

  @@id([album_id, track_id])
  @@index([track_id])
  @@index([album_id])
}


model artists_tracks {
  artist_id Int
  track_id  Int
  artists   artists @relation(fields: [artist_id], references: [id], onDelete: Cascade, onUpdate: Cascade)
  tracks    tracks  @relation(fields: [track_id], references: [id], onDelete: Cascade, onUpdate: Cascade)

  @@id([artist_id, track_id])
  @@index([artist_id])
  @@index([track_id])
}


model artists_albums {
  artist_id Int
  album_id  Int
  artists   artists @relation(fields: [artist_id], references: [id], onDelete: Cascade, onUpdate: Cascade)
  albums    albums  @relation(fields: [album_id], references: [id], onDelete: Cascade, onUpdate: Cascade)

  @@id([artist_id, album_id])
  @@index([artist_id])
  @@index([album_id])
}


